<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Hangman</title>

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">

</head>

<body>
    <img class="img-c" src="images/header.png" alt="header">

    <div class="jumbotron col-sm-8">
        <p>Press any key to get started!</p>
        <p>You just pressed
            <span id="user-key">
                <strong>_</strong>
            </span>.</p>
        <p>Wins
            <span id="wins"></span>
        </p>
        <p>Current Word</p>
        <p>
            <span id="placeholder"></span>
        </p>
        <p>Number of guesses remaining:
            <span id="available-guess"></span>
        </p>
        <p></p>
        <p>Letters already guessed:</p>
        <p>
            <span id="wrong-select"></span>
        </p>
        <img class="img-c" src="images/body.png" alt="">
    </div>


    <script type="text/javascript">


        // Starting a new game and selecting the word for the hangman game.
        var wordList = ["espionage", "mnemonic", "megahertz", "xylophone", "zigzagging", "rickshaw", "kilobyte", "daiquiri", "rhubarb", "wyvern"];

        // Randomly selecting a word from the list, and setting placeholder for the length of the word.
        var selection;
        var placeholder;
        var userGuess = document.getElementById("user-key");
        var wrongSelect = [];
        var availableGuess = 10;
        var totalGuess = 0;
        var guessLength = 0;
        var wins = 0;


        function newGame() {
            selection = wordList[Math.floor(Math.random() * wordList.length)];
            console.log(selection);
            placeholder = "";
            wrongSelect = [];
            availableGuess = 10;
            totalGuess = 0;
            guessLength = 0;    
            for (var i = 0; i < selection.length; i++) {
                placeholder = placeholder + "_";
                document.getElementById("placeholder").innerHTML = placeholder;
            }
            x();
        }
 

        // Setting up the onKey event for user selection.

        function x(event) {
            if (event === undefined) {
                return;
            }
            else {
                userGuess.textContent = event.key;
                if (availableGuess > totalGuess) {
                    console.log(event.keyCode);
                    if (event.keyCode >= 65 && event.keyCode <= 90) {
                        console.log("Valid letter")
                        var isWrongGuess = true;
                        for (var i = 0; i < selection.length; i++) {
                            if (event.key === selection[i]) {
                                placeholder = placeholder.slice(0, i) + event.key + placeholder.slice(i + 1);
                                document.getElementById("placeholder").innerHTML = placeholder;
                                guessLength++;
                                console.log();
                                isWrongGuess = false;
                            }
                        }
                        if (isWrongGuess) {
                            wrongSelect.push(event.key);
                            availableGuess = availableGuess - 1;
                            document.getElementById("wrong-select").innerHTML = wrongSelect;
                            document.getElementById("available-guess").innerHTML = availableGuess;
                            console.log(selection[i]);
                        }

                        if (guessLength === selection.length) {
                            alert("Congrats, you have survived!");
                            wins++;
                            document.getElementById("wins").innerHTML = wins;
                            newGame();
                        }
                    }
                    else {
                        alert("Invalid character. Guess again");
                    }
                }
                else {
                    alert("You lose. You dead, muhuhahaha!");
                    newGame();
                }
            }
        }

      document.onkeyup = x;

        newGame();

    </script>
</body>

</html>